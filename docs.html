<!DOCTYPE html>
<html lang="fr" class="h-full">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Documentation - WebSuite Platform</title>
    <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Crect width='24' height='24' rx='5' fill='%239333ea'/%3E%3Cpath d='M8.5 13.5L7 15C5.9 16.1 5.9 17.9 7 19C8.1 20.1 9.9 20.1 11 19L13.5 16.5C14.6 15.4 14.6 13.6 13.5 12.5' fill='none' stroke='white' stroke-width='1.8' stroke-linecap='round' stroke-linejoin='round'/%3E%3Cpath d='M15.5 10.5L17 9C18.1 7.9 18.1 6.1 17 5C15.9 3.9 14.1 3.9 13 5L10.5 7.5C9.4 8.6 9.4 10.4 10.5 11.5' fill='none' stroke='white' stroke-width='1.8' stroke-linecap='round' stroke-linejoin='round'/%3E%3Cpath d='M10 14L14 10' fill='none' stroke='white' stroke-width='1.8' stroke-linecap='round' stroke-linejoin='round'/%3E%3C/svg%3E">
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            darkMode: 'class',
        }
    </script>
    <script src="https://cdn.jsdelivr.net/npm/marked@11/marked.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        /* Markdown Styles */
        .markdown-content {
            @apply prose prose-slate dark:prose-invert max-w-none;
        }
        .markdown-content h1 {
            @apply text-4xl font-bold mb-6 text-slate-900 dark:text-slate-50 border-b border-slate-200 dark:border-slate-700 pb-4;
        }
        .markdown-content h2 {
            @apply text-3xl font-bold mt-8 mb-4 text-slate-800 dark:text-slate-100;
        }
        .markdown-content h3 {
            @apply text-2xl font-semibold mt-6 mb-3 text-slate-700 dark:text-slate-200;
        }
        .markdown-content h4 {
            @apply text-xl font-semibold mt-4 mb-2 text-slate-700 dark:text-slate-300;
        }
        .markdown-content p {
            @apply mb-4 text-slate-600 dark:text-slate-300 leading-7;
        }
        .markdown-content ul, .markdown-content ol {
            @apply mb-4 ml-6 space-y-2;
        }
        .markdown-content li {
            @apply text-slate-600 dark:text-slate-300;
        }
        .markdown-content code {
            @apply bg-slate-100 dark:bg-slate-800 text-purple-600 dark:text-purple-400 px-2 py-1 rounded text-sm font-mono;
        }
        .markdown-content pre {
            @apply bg-slate-900 dark:bg-slate-950 p-6 rounded-lg overflow-x-auto mb-4;
        }
        .markdown-content pre code {
            @apply bg-transparent text-slate-100 p-0;
        }
        .markdown-content blockquote {
            @apply border-l-4 border-purple-500 pl-4 italic my-4 text-slate-500 dark:text-slate-400;
        }
        .markdown-content a {
            @apply text-purple-600 dark:text-purple-400 hover:text-purple-700 dark:hover:text-purple-300 underline;
        }
        .markdown-content table {
            @apply w-full border-collapse mb-4;
        }
        .markdown-content th {
            @apply bg-slate-100 dark:bg-slate-800 px-4 py-2 text-left font-semibold border border-slate-300 dark:border-slate-700;
        }
        .markdown-content td {
            @apply px-4 py-2 border border-slate-300 dark:border-slate-700;
        }
        .markdown-content img {
            @apply rounded-lg shadow-lg my-4;
        }
        /* Custom scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
            height: 8px;
        }
        ::-webkit-scrollbar-track {
            @apply bg-slate-100 dark:bg-slate-900;
        }
        ::-webkit-scrollbar-thumb {
            @apply bg-slate-300 dark:bg-slate-700 rounded-full;
        }
        ::-webkit-scrollbar-thumb:hover {
            @apply bg-slate-400 dark:bg-slate-600;
        }
    </style>
</head>
<body class="h-full bg-slate-50 dark:bg-slate-900 transition-colors duration-300">
    <div class="flex h-full">
        <!-- Sidebar -->
        <aside id="docs-sidebar" class="w-64 bg-white dark:bg-slate-800 border-r border-slate-200 dark:border-slate-700 flex flex-col h-screen sticky top-0">
            <!-- Header -->
            <div class="p-6 border-b border-slate-200 dark:border-slate-700">
                <a href="/docs/guide/quick-start" class="flex items-center gap-3">
                    <div class="w-10 h-10 bg-gradient-to-br from-purple-500 to-purple-600 rounded-lg flex items-center justify-center">
                        <i class="fas fa-book text-white text-lg"></i>
                    </div>
                    <div>
                        <h1 class="text-lg font-bold text-slate-900 dark:text-slate-50">WebSuite Platform</h1>
                        <p class="text-xs text-slate-500 dark:text-slate-400">Documentation</p>
                    </div>
                </a>
            </div>

            <!-- Navigation -->
            <nav class="flex-1 overflow-y-auto p-4">
                <div class="space-y-1">
                    <!-- Home -->
                    <a href="/docs/guide/quick-start" class="flex items-center gap-3 px-4 py-2 rounded-lg text-slate-700 dark:text-slate-300 hover:bg-slate-100 dark:hover:bg-slate-700 transition-colors group">
                        <i class="fas fa-home w-4 text-center"></i>
                        <span>Accueil</span>
                    </a>

                    <!-- Guide -->
                    <div class="mt-4">
                        <div class="px-4 py-2 text-xs font-semibold text-slate-500 dark:text-slate-400 uppercase tracking-wider">
                            Guide
                        </div>
                        <a href="/docs/guide/quick-start" 
                           class="flex items-center gap-3 px-4 py-2 rounded-lg text-slate-600 dark:text-slate-300 hover:bg-slate-100 dark:hover:bg-slate-700 transition-colors">
                            <i class="fas fa-rocket w-4 text-center text-purple-500"></i>
                            <span>Démarrage Rapide</span>
                        </a>
                        <a href="/docs/guide/installation" 
/guide/installation" 
                           class="flex items-center gap-3 px-4 py-2 rounded-lg text-slate-600 dark:text-slate-300 hover:bg-slate-100 dark:hover:bg-slate-700 transition-colors">
                            <i class="fas fa-download w-4 text-center text-purple-500"></i>
                            <span>Installation</span>
                        </a>
                        <a href="/docs/guide/development" 
/guide/development" 
                           class="flex items-center gap-3 px-4 py-2 rounded-lg text-slate-600 dark:text-slate-300 hover:bg-slate-100 dark:hover:bg-slate-700 transition-colors">
                            <i class="fas fa-code w-4 text-center text-purple-500"></i>
                            <span>Développement Local</span>
                        </a>
                        <a href="/docs/guide/structure" 
/guide/structure" 
                           class="flex items-center gap-3 px-4 py-2 rounded-lg text-slate-600 dark:text-slate-300 hover:bg-slate-100 dark:hover:bg-slate-700 transition-colors">
                            <i class="fas fa-sitemap w-4 text-center text-purple-500"></i>
                            <span>Structure du Projet</span>
                        </a>
                    </div>

                    <!-- Déploiement -->
                    <div class="mt-4">
                        <div class="px-4 py-2 text-xs font-semibold text-slate-500 dark:text-slate-400 uppercase tracking-wider">
                            Déploiement
                        </div>
                        <a href="/docs/deployment/cloudflare-pages" 
/deployment/cloudflare-pages" 
                           class="flex items-center gap-3 px-4 py-2 rounded-lg text-slate-600 dark:text-slate-300 hover:bg-slate-100 dark:hover:bg-slate-700 transition-colors">
                            <i class="fab fa-cloudflare w-4 text-center text-purple-500"></i>
                            <span>Cloudflare Pages</span>
                        </a>
                        <a href="/docs/deployment/custom-domain" 
/deployment/custom-domain" 
                           class="flex items-center gap-3 px-4 py-2 rounded-lg text-slate-600 dark:text-slate-300 hover:bg-slate-100 dark:hover:bg-slate-700 transition-colors">
                            <i class="fas fa-globe w-4 text-center text-purple-500"></i>
                            <span>Domaine Personnalisé</span>
                        </a>
                        <a href="/docs/deployment/environment-variables" 
/deployment/environment-variables" 
                           class="flex items-center gap-3 px-4 py-2 rounded-lg text-slate-600 dark:text-slate-300 hover:bg-slate-100 dark:hover:bg-slate-700 transition-colors">
                            <i class="fas fa-cog w-4 text-center text-purple-500"></i>
                            <span>Variables d'Environnement</span>
                        </a>
                    </div>

                    <!-- Configuration -->
                    <div class="mt-4">
                        <div class="px-4 py-2 text-xs font-semibold text-slate-500 dark:text-slate-400 uppercase tracking-wider">
                            Configuration
                        </div>
                        <a href="/docs/configuration/overview" 
/configuration/overview" 
                           class="flex items-center gap-3 px-4 py-2 rounded-lg text-slate-600 dark:text-slate-300 hover:bg-slate-100 dark:hover:bg-slate-700 transition-colors">
                            <i class="fas fa-sliders-h w-4 text-center text-purple-500"></i>
                            <span>Vue d'ensemble</span>
                        </a>
                        <a href="/docs/configuration/rss-feeds" 
/configuration/rss-feeds" 
                           class="flex items-center gap-3 px-4 py-2 rounded-lg text-slate-600 dark:text-slate-300 hover:bg-slate-100 dark:hover:bg-slate-700 transition-colors">
                            <i class="fas fa-rss w-4 text-center text-purple-500"></i>
                            <span>Flux RSS</span>
                        </a>
                        <a href="/docs/configuration/seo" 
/configuration/seo" 
                           class="flex items-center gap-3 px-4 py-2 rounded-lg text-slate-600 dark:text-slate-300 hover:bg-slate-100 dark:hover:bg-slate-700 transition-colors">
                            <i class="fas fa-search w-4 text-center text-purple-500"></i>
                            <span>SEO & Métadonnées</span>
                        </a>
                    </div>

                    <!-- API -->
                    <div class="mt-4">
                        <div class="px-4 py-2 text-xs font-semibold text-slate-500 dark:text-slate-400 uppercase tracking-wider">
                            API
                        </div>
                        <a href="/docs/api/overview" 
/api/overview" 
                           class="flex items-center gap-3 px-4 py-2 rounded-lg text-slate-600 dark:text-slate-300 hover:bg-slate-100 dark:hover:bg-slate-700 transition-colors">
                            <i class="fas fa-plug w-4 text-center text-purple-500"></i>
                            <span>Vue d'ensemble</span>
                        </a>
                        <a href="/docs/api/public-endpoints" 
/api/public-endpoints" 
                           class="flex items-center gap-3 px-4 py-2 rounded-lg text-slate-600 dark:text-slate-300 hover:bg-slate-100 dark:hover:bg-slate-700 transition-colors">
                            <i class="fas fa-unlock w-4 text-center text-purple-500"></i>
                            <span>Endpoints Publics</span>
                        </a>
                        <a href="/docs/api/protected-endpoints" 
/api/protected-endpoints" 
                           class="flex items-center gap-3 px-4 py-2 rounded-lg text-slate-600 dark:text-slate-300 hover:bg-slate-100 dark:hover:bg-slate-700 transition-colors">
                            <i class="fas fa-lock w-4 text-center text-purple-500"></i>
                            <span>Endpoints Protégés</span>
                        </a>
                        <a href="/docs/api/authentication" 
/api/authentication" 
                           class="flex items-center gap-3 px-4 py-2 rounded-lg text-slate-600 dark:text-slate-300 hover:bg-slate-100 dark:hover:bg-slate-700 transition-colors">
                            <i class="fas fa-key w-4 text-center text-purple-500"></i>
                            <span>Authentification</span>
                        </a>
                        <a href="/docs/api/examples" 
/api/examples" 
                           class="flex items-center gap-3 px-4 py-2 rounded-lg text-slate-600 dark:text-slate-300 hover:bg-slate-100 dark:hover:bg-slate-700 transition-colors">
                            <i class="fas fa-code w-4 text-center text-purple-500"></i>
                            <span>Exemples</span>
                        </a>
                    </div>

                    <!-- Contenu -->
                    <div class="mt-4">
                        <div class="px-4 py-2 text-xs font-semibold text-slate-500 dark:text-slate-400 uppercase tracking-wider">
                            Contenu
                        </div>
                        <a href="/docs/content/articles" 
/content/articles" 
                           class="flex items-center gap-3 px-4 py-2 rounded-lg text-slate-600 dark:text-slate-300 hover:bg-slate-100 dark:hover:bg-slate-700 transition-colors">
                            <i class="fas fa-newspaper w-4 text-center text-purple-500"></i>
                            <span>Articles</span>
                        </a>
                        <a href="/docs/content/videos" 
/content/videos" 
                           class="flex items-center gap-3 px-4 py-2 rounded-lg text-slate-600 dark:text-slate-300 hover:bg-slate-100 dark:hover:bg-slate-700 transition-colors">
                            <i class="fab fa-youtube w-4 text-center text-purple-500"></i>
                            <span>Vidéos</span>
                        </a>
                        <a href="/docs/content/podcasts" 
/content/podcasts" 
                           class="flex items-center gap-3 px-4 py-2 rounded-lg text-slate-600 dark:text-slate-300 hover:bg-slate-100 dark:hover:bg-slate-700 transition-colors">
                            <i class="fas fa-podcast w-4 text-center text-purple-500"></i>
                            <span>Podcasts</span>
                        </a>
                        <a href="/docs/content/events" 
/content/events" 
                           class="flex items-center gap-3 px-4 py-2 rounded-lg text-slate-600 dark:text-slate-300 hover:bg-slate-100 dark:hover:bg-slate-700 transition-colors">
                            <i class="fas fa-calendar w-4 text-center text-purple-500"></i>
                            <span>Événements</span>
                        </a>
                    </div>

                    <!-- Interface Admin -->
                    <div class="mt-4">
                        <div class="px-4 py-2 text-xs font-semibold text-slate-500 dark:text-slate-400 uppercase tracking-wider">
                            Interface Admin
                        </div>
                        <a href="/docs/admin/dashboard" 
/admin/dashboard" 
                           class="flex items-center gap-3 px-4 py-2 rounded-lg text-slate-600 dark:text-slate-300 hover:bg-slate-100 dark:hover:bg-slate-700 transition-colors">
                            <i class="fas fa-tachometer-alt w-4 text-center text-purple-500"></i>
                            <span>Dashboard</span>
                        </a>
                        <a href="/docs/admin/features" 
/admin/features" 
                           class="flex items-center gap-3 px-4 py-2 rounded-lg text-slate-600 dark:text-slate-300 hover:bg-slate-100 dark:hover:bg-slate-700 transition-colors">
                            <i class="fas fa-star w-4 text-center text-purple-500"></i>
                            <span>Fonctionnalités</span>
                        </a>
                        <a href="/docs/admin/content-management" 
/admin/content-management" 
                           class="flex items-center gap-3 px-4 py-2 rounded-lg text-slate-600 dark:text-slate-300 hover:bg-slate-100 dark:hover:bg-slate-700 transition-colors">
                            <i class="fas fa-edit w-4 text-center text-purple-500"></i>
                            <span>Gestion du Contenu</span>
                        </a>
                        <a href="/docs/admin/api-explorer" 
/admin/api-explorer" 
                           class="flex items-center gap-3 px-4 py-2 rounded-lg text-slate-600 dark:text-slate-300 hover:bg-slate-100 dark:hover:bg-slate-700 transition-colors">
                            <i class="fas fa-flask w-4 text-center text-purple-500"></i>
                            <span>API Explorer</span>
                        </a>
                    </div>

                    <!-- Avancé -->
                    <div class="mt-4">
                        <div class="px-4 py-2 text-xs font-semibold text-slate-500 dark:text-slate-400 uppercase tracking-wider">
                            Avancé
                        </div>
                        <a href="/docs/advanced/caching" 
/advanced/caching" 
                           class="flex items-center gap-3 px-4 py-2 rounded-lg text-slate-600 dark:text-slate-300 hover:bg-slate-100 dark:hover:bg-slate-700 transition-colors">
                            <i class="fas fa-tachometer-alt w-4 text-center text-purple-500"></i>
                            <span>Cache & Performance</span>
                        </a>
                        <a href="/docs/advanced/security" 
/advanced/security" 
                           class="flex items-center gap-3 px-4 py-2 rounded-lg text-slate-600 dark:text-slate-300 hover:bg-slate-100 dark:hover:bg-slate-700 transition-colors">
                            <i class="fas fa-shield-alt w-4 text-center text-purple-500"></i>
                            <span>Sécurité</span>
                        </a>
                        <a href="/docs/advanced/htmx-ssr" 
/advanced/htmx-ssr" 
                           class="flex items-center gap-3 px-4 py-2 rounded-lg text-slate-600 dark:text-slate-300 hover:bg-slate-100 dark:hover:bg-slate-700 transition-colors">
                            <i class="fas fa-code w-4 text-center text-purple-500"></i>
                            <span>HTMX & SSR</span>
                        </a>
                        <a href="/docs/advanced/customization" 
/advanced/customization" 
                           class="flex items-center gap-3 px-4 py-2 rounded-lg text-slate-600 dark:text-slate-300 hover:bg-slate-100 dark:hover:bg-slate-700 transition-colors">
                            <i class="fas fa-paint-brush w-4 text-center text-purple-500"></i>
                            <span>Personnalisation</span>
                        </a>
                    </div>

                    <!-- FAQ -->
                    <div class="mt-4">
                        <div class="px-4 py-2 text-xs font-semibold text-slate-500 dark:text-slate-400 uppercase tracking-wider">
                            FAQ
                        </div>
                        <a href="/docs/faq/general" 
/faq/general" 
                           class="flex items-center gap-3 px-4 py-2 rounded-lg text-slate-600 dark:text-slate-300 hover:bg-slate-100 dark:hover:bg-slate-700 transition-colors">
                            <i class="fas fa-question-circle w-4 text-center text-purple-500"></i>
                            <span>Questions Fréquentes</span>
                        </a>
                        <a href="/docs/faq/troubleshooting" 
/faq/troubleshooting" 
                           class="flex items-center gap-3 px-4 py-2 rounded-lg text-slate-600 dark:text-slate-300 hover:bg-slate-100 dark:hover:bg-slate-700 transition-colors">
                            <i class="fas fa-tools w-4 text-center text-purple-500"></i>
                            <span>Dépannage</span>
                        </a>
                    </div>
                </div>
            </nav>

            <!-- Footer -->
            <div class="p-4 border-t border-slate-200 dark:border-slate-700">
                <button onclick="toggleDarkMode()" class="w-full flex items-center gap-3 px-4 py-2 rounded-lg text-slate-600 dark:text-slate-300 hover:bg-slate-100 dark:hover:bg-slate-700 transition-colors">
                    <i class="fas fa-moon dark:hidden w-4 text-center"></i>
                    <i class="fas fa-sun hidden dark:inline w-4 text-center"></i>
                    <span class="dark:hidden">Mode sombre</span>
                    <span class="hidden dark:inline">Mode clair</span>
                </button>
            </div>
        </aside>

        <!-- Main Content -->
        <main class="flex-1 overflow-y-auto">
            <div id="docs-content" class="max-w-4xl mx-auto p-8">
                <!-- Loading state -->
                <div class="flex items-center justify-center h-64">
                    <div class="text-center">
                        <div class="animate-spin rounded-full h-12 w-12 border-b-2 border-purple-500 mx-auto mb-4"></div>
                        <p class="text-slate-500 dark:text-slate-400">Chargement de la documentation...</p>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <script>
        // Dark mode toggle
        function toggleDarkMode() {
            document.documentElement.classList.toggle('dark');
            localStorage.setItem('darkMode', document.documentElement.classList.contains('dark'));
        }

        // Initialize dark mode
        if (localStorage.getItem('darkMode') === 'true' || (!localStorage.getItem('darkMode') && window.matchMedia('(prefers-color-scheme: dark)').matches)) {
            document.documentElement.classList.add('dark');
        }

        // Load markdown content
        async function loadDocContent(path) {
            try {
                // Convert path from /docs/guide/quick-start to /api/docs/guide/quick-start
                const apiPath = path.replace('/docs', '/api/docs');
                const response = await fetch(apiPath);
                
                if (!response.ok) {
                    throw new Error(`Failed to load: ${response.status}`);
                }
                
                const { markdown } = await response.json();
                
                // Convert markdown to HTML using marked.js
                if (typeof marked !== 'undefined') {
                    const html = marked.parse(markdown);
                    return `<div class="markdown-content">${html}</div>`;
                } else {
                    // Fallback: return raw markdown
                    return `<pre class="markdown-content">${markdown}</pre>`;
                }
            } catch (error) {
                console.error('Error loading doc:', error);
                return `<div class="p-8 text-center">
                    <div class="text-red-500 text-xl mb-4"><i class="fas fa-exclamation-circle"></i></div>
                    <h2 class="text-2xl font-bold text-slate-900 dark:text-slate-50 mb-2">Erreur de chargement</h2>
                    <p class="text-slate-600 dark:text-slate-400">Impossible de charger la documentation.</p>
                </div>`;
            }
        }

        // Load initial content
        document.addEventListener('DOMContentLoaded', async function() {
            const path = window.location.pathname;
            let initialPath = '/docs/guide/quick-start';
            
            if (path.startsWith('/docs/') && path !== '/docs' && path !== '/docs.html' && path !== '/docs/') {
                initialPath = path;
            }

            // Load the initial page
            const content = await loadDocContent(initialPath);
            document.getElementById('docs-content').innerHTML = content;
            updateActiveLink(initialPath);
        });

        // Handle browser back/forward
        window.addEventListener('popstate', async function(e) {
            const path = window.location.pathname;
            if (path.startsWith('/docs')) {
                const content = await loadDocContent(path);
                document.getElementById('docs-content').innerHTML = content;
                updateActiveLink(path);
            }
        });

        // Update active link in sidebar
        function updateActiveLink(currentPath) {
            // Remove active class from all links
            document.querySelectorAll('#docs-sidebar a').forEach(link => {
                link.classList.remove('bg-purple-50', 'dark:bg-purple-900/20', 'text-purple-600', 'dark:text-purple-400', 'font-semibold');
            });

            // Add active class to current link
            document.querySelectorAll('#docs-sidebar a').forEach(link => {
                const href = link.getAttribute('href');
                if (href && (currentPath === href || currentPath.startsWith(href + '/'))) {
                    link.classList.add('bg-purple-50', 'dark:bg-purple-900/20', 'text-purple-600', 'dark:text-purple-400', 'font-semibold');
                }
            });
        }

        // Handle clicks on sidebar links
        document.addEventListener('click', async function(e) {
            const link = e.target.closest('a[href^="/docs"]');
            if (link) {
                e.preventDefault();
                const href = link.getAttribute('href');
                const content = await loadDocContent(href);
                document.getElementById('docs-content').innerHTML = content;
                
                // Update URL without reload
                window.history.pushState({}, '', href);
                updateActiveLink(href);
                
                // Scroll to top
                window.scrollTo(0, 0);
            }
        });
    </script>
</body>
</html>

